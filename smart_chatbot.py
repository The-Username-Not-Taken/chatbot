import random
import jieba
import pandas as pd
import logging

jieba.setLogLevel(logging.INFO)

nameList = ['ç”œèŠæ±½æ°´','æ™šæ™šæ˜Ÿæ²³','æµ·ä¸è¿Ÿè½','ç´ å¹´å‡‰éŸ³','çœ‰çœ¼åŠ¨äºº','è½¦çª—èµ·é›¾','æ— æ„äº‰æ˜¥','æ­¤å»ç»å¹´','ä¸€çº¸æƒ…ä¹¦','æœŸé™æµªæ¼«','å€¦é¸Ÿå½’æ—','å°±åƒå½“åˆ','æ¢¦åœ¨æ·±å··','çœ¼åº•æ˜Ÿç¢','ä¼´å›ç»ˆè€','æ—¥è½äºè¥¿','æ— æƒ…æœ‰æ€','æ— äººå€¾å¬','ä¸è§ä¸å¿µ','äººé—´æ— å‘³','é’æ‰ä¾æ—§','å¿µå¿å¤©æ¶¯','æš‚åœç™½æ˜¼','æ˜Ÿè½å±±é—´','å§‹äºåˆè§','æ‘˜ç¢—æœˆäº®','å¿ƒåŠ¨ä¸è¶³','è½æ—¥æµ·æ¹¾','é»å¤•æ—§æ¢¦','åŒ—å³¶æ˜¥æ¸¡','éé‡æ¸©æŸ”','å­¤çƒŸå¾€äº‹','äº†æ–­çˆ±æƒ…','æŠ˜æ‰‡è½»æ™ƒ','æ±Ÿå—æœªå¯’','æµ·æ£ æœªçœ ','ä¸€å¿µç—´ç‹‚','å“­è“äº†æµ·','çˆ±ä¸Šå­¤ç‹¬','åƒæ¢¦ä¸€åœº','ä¸ç•å±±æµ·','è½¬å¿µæˆç©º','æ›²ç»ˆäººæ•£','ç»†é›¨æµå…‰','ä¸‡é²¸æˆæµ·','å¤æ—¥æµ…ç¬‘','æ¸©æŸ”çš„é£','è½è’è€Œé€ƒ','éšæ¢¦è€Œé£','æœˆç‰™å¼¯å¼¯','é’±æ¯”å¿ƒçœŸ','æƒ…å½’ä½•å¤„','åŠç›æ¸…é…’','è·¨è¶Šå±±æµ·','å¯ç›å¯ç”œ','ä¸æ›¾é‡è§','æ¸…è¿œæ¥¼é˜','å›éæ¢“æ²','ä¸€å°¾æµèº','æœˆçƒç½šç«™','é™Œä¸ŠçƒŸé›¨','å¤œé›¨å¯„åŒ—','ä»…å­˜å§¿æ€','é€†æµçš„æ³ª','ä¼ˆéšé£é£','é¦–é€‰å¿ƒåŠ¨','æ—æ·±è§é¹¿','å†·å¿ƒä¸ºå¸','ç¹åè½å°½','æ±Ÿå±±é”™è½','åŠç³–èŠå£«','ä¸€åˆ‡éšæ„','å½’è½é“¶æ²³','é¥è¿œçš„å¥¹','ä¸€èº«ä»™æ°”','æ¸…æ¬¢ç™¾å‘³','ä¸€ç”Ÿæ‰€çˆ±','å‡Œæ™¨å…¥çœ ','åŠå¤æ— çˆ±','é™Œè·¯ç‹¬ç™½','æ— è¨€æ¸©æŸ”']
aiName = nameList[random.randint(0,80)]
print(aiName + ':\næ¬¢è¿æ¥åˆ°AIæ™ºèƒ½èŠå¤©æœºå™¨äººï¼Œè¿™é‡Œæ˜¯' + aiName + 'ï¼Œæˆ‘ä»¬å¯ä»¥å¼€å§‹å¯¹è¯äº†ï¼Œè¯·è¾“å…¥...\n')

emoWords = pd.read_csv('C:\Old Folder\ç©\smart_chatbot\æƒ…æ„Ÿè¯æ±‡.csv', sep = ', ', engine = 'python', index_col = 'è¯è¯­') # AI æš—åœ°é‡Œæ‹¿äº†ä¸€æœ¬è¯å…¸å­¦ä¹ äººç±»è¯­è¨€çš„æƒ…æ„Ÿ

wordlist = ['å…¸', 'å…¸ä¸­å…¸', 'ä¹', 'ç¬‘å˜»äº†', 'ç»·', 'èšŒ'] # å¯¹çº¿ä¸‰å¤§ä»¶ï¼šå…¸ä¹èšŒ

fuduji = ''

while True:
    print('æ‚¨:')
    inp = input('')
    if inp == 'exit()':
        exit()
    if fuduji != '' and ((fuduji in inp) or (inp in fuduji)):
        output = 'å¤è¯»æœºæ˜¯å§ğŸ˜…'
    else:
        output = ''
        inpCut = jieba.lcut(inp)
        rep = ''
        jileConstant = 0 

        for i in (0,len(inpCut) - 1):
            if len(inpCut) > 1:
                if inpCut[i] == rep:
                    output = 'æ€¥äº†æ€¥äº†'
                    break
            rep = inpCut[i] # æ£€æµ‹æœ‰æ²¡æœ‰é‡å¤ç”¨è¯ï¼Œå¦‚æœé‡å¤è¡¨ç¤ºç”¨æˆ·æ€¥äº†
            jileConstant_temp = 0

            try:
                if emoWords.loc[inpCut[i]]['æƒ…æ„Ÿåˆ†ç±»'] in ['NA', 'NI', 'NC', 'NG', 'NE', 'ND', 'NN', 'NK', 'NL']:
                    jileConstant_temp = emoWords.loc[inpCut[i]]['å¼ºåº¦']
            except:
                continue # åœ¨å¤§è¿ç†å·¥è¯è¡¨é‡Œæ£€æµ‹è¿™ä¸ªè¯æ€¥ä¸æ€¥ï¼Œå¹¶æŸ¥æ‰¾è¿™ä¸ªè¯çš„å¼ºåº¦ï¼Œæ‰¾ä¸åˆ°ç®—äº†

            jileConstant = jileConstant + jileConstant_temp

        if len(inpCut) >= 5:
            if jileConstant >= 5:
                output = 'æ€¥äº†ğŸ˜…'
            if jileConstant >= 10:
                output = 'æ€¥äº†æ€¥äº†'
            if jileConstant >= 20:
                output = 'æ€¥äº†æ€¥äº†ğŸ˜…'
        elif len(inpCut) <= 5 and jileConstant > 0:
            output = 'æ€¥äº†'
            # é‡‡ç”¨å¤§è¿ç†å·¥è¯è¡¨ï¼Œå¦‚æœç”¨æˆ·å‘è¨€é‡Œæœ‰æƒ…æ„Ÿä¸ºæ„¤æ€’æˆ–è€…æƒŠæçš„è¯æ±‡ï¼Œåˆ™è¡¨ç¤ºç”¨æˆ·æ€¥äº†ï¼›å¼ºåº¦è¶Šé«˜ï¼Œåˆ™AIä¼šè¯´æ›´å¤šçš„æ€¥äº†ä»¥åŠå¢åŠ æµæ±—é»„è±†ï¼Œæ–¹ä¾¿æ›´å¥½åœ°æ²»ç–—ä½è¡€å‹
        
        if output == '':
            ran = random.randint(0,6) # éšæœºç”Ÿæˆå…¸ä¹èšŒä¸‰å¤§ä»¶
            if ran == 6 or (aiName in inp):
                output = 'ğŸ˜…' # å¦‚æœç”¨æˆ·é‡å¤äº†AIç”¨æˆ·åï¼Œåˆ™AIå†·çœ¼ç›¸å¾…ï¼Œååˆ†é«˜å†·
            else:
                output = wordlist[ran]
                emo = random.randint(1,10)
                if emo > 7:
                    output = output + 'ğŸ˜…' # éšæœºæ·»åŠ æµæ±—é»„è±†
    print('\n' + aiName + ':\n' + output + '\n')
    fuduji = output

# References:
# å¤§è¿ç†å·¥å¤§å­¦ä¸­æ–‡æƒ…æ„Ÿè¯æ±‡æœ¬ä½“åº“
